import"https://cdn.jsdelivr.net/npm/typed.js/dist/typed.umd.min.js";export let chatWindowExpanded=!1;export const elements={header:document.querySelector("header"),logo:document.querySelector("#logo"),chatContainer:document.querySelector("#chat-container"),chatWindow:document.querySelector("#chat-window"),messagesContainer:null,inputContainer:document.querySelector("#input-container"),input:document.querySelector("input"),submit:document.querySelector("#submit"),suggestions:document.querySelector("#suggestions")};export function inputFocus(){elements.input.setAttribute("readonly","readonly"),elements.input.focus(),elements.input.removeAttribute("readonly")}export function inputPlaceholderAndFocus(){new Typed(elements.input,{strings:["^500 Ask me anything about Gui..."],contentType:"null",attr:"placeholder",typeSpeed:10,showCursor:!1,onComplete:inputFocus})}export function toggleSubmitButton(){const e=elements.input.value.trim().length>0;elements.submit.classList.toggle("active",e)}export function forbidSubmitButton(){elements.submit.classList.toggle("active",!1)}export function clearInput(){elements.input.value=""}export function populateInput(e){elements.input.value=e}export function closeKeyboard(){elements.input.blur()}export function changePlaceholder(e){elements.input.placeholder=e}export function toggleInput(){const e=elements.input.disabled;elements.input.disabled=!e}export function expandChatWindow(){const e=elements.chatContainer.getBoundingClientRect().top;elements.chatContainer.style.width=`${elements.inputContainer.offsetWidth}px`,elements.chatContainer.style.height=`${elements.inputContainer.offsetHeight}px`,elements.chatContainer.style.top=`${e}px`,elements.chatContainer.style.position="fixed",elements.chatContainer.offsetHeight,elements.chatContainer.style.maxWidth="900px",elements.chatContainer.style.width="90%",elements.chatContainer.style.maxHeight="800px",elements.chatContainer.style.top="60px",elements.chatContainer.style.minHeight="265px",elements.chatContainer.style.height="calc(100dvh - 130px)",elements.inputContainer.style.backgroundColor="#262626",elements.inputContainer.style.padding="10px",elements.chatWindow.style.height="calc(100% - 80px)",elements.chatWindow.style.marginTop="20px",elements.chatWindow.style.padding="0px 9px 0px 15px",elements.chatWindow.style.opacity="1",elements.logo.style.opacity="0",elements.suggestions.style.opacity="0",setTimeout((()=>elements.header.classList.add("visible")),600),chatWindowExpanded=!0;let t=document.createElement("div");t.className="messages-container",t.setAttribute("role","log"),t.setAttribute("aria-label","Chat conversation with GuiPT"),t.setAttribute("aria-live","polite"),elements.chatWindow.appendChild(t),elements.messagesContainer=t;const n=document.createElement("div");n.textContent="Privacy: chats are stored to improve GuiPT. By continuing, you accept this. No personal info, please.",n.id="disclaimer",elements.disclaimer=n,elements.chatWindow.appendChild(n)}function animateElement(e){elements.messagesContainer.appendChild(e),e.style.opacity="0",e.style.transform="translateY(10px)",e.offsetHeight,e.style.transition="all 0.5s ease",e.style.opacity="1",e.style.transform="translateY(0)",elements.chatWindow.scrollTop=elements.chatWindow.scrollHeight}export function addMessage(e,t,n=null){if("user"==e){const e=document.createElement("div");e.classList.add("message","user-message"),e.textContent=t,e.setAttribute("aria-label","Your message: "+t),animateElement(e)}else if("bot"==e){let e=n;e.removeAttribute("id"),e.innerHTML="",e.setAttribute("aria-label","GuiPT response: "+t),t=t.replace(/&/g,"&amp;");const s=new ResizeObserver((()=>{elements.chatWindow.scrollTop=elements.chatWindow.scrollHeight}));new Typed(e,{strings:[t],contentType:"html",typeSpeed:10,showCursor:!1,onBegin:()=>{s.observe(e)},onComplete:()=>{s.disconnect()}})}else{const e=document.createElement("div");e.classList.add("message","error-message"),e.textContent=t,animateElement(e)}}export function showLoader(){const e=document.createElement("div");e.id="loader-container",e.classList.add("message","bot-message");const t=document.createElement("div");return t.id="loader",t.setAttribute("role","status"),t.setAttribute("aria-label","GuiPT is thinking..."),e.appendChild(t),animateElement(e),e}